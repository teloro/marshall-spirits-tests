<html>
  <head>
    <style>
      body {
        font-family: Arial, sans-serif;
        font-size: 16px;
        margin: 0;
        padding: 20px;
      }
      ul {
        list-style-type: none;
        padding: 0;
      }
      li {
        border-bottom: 1px solid #ccc;
        padding: 12px;
      }
      a {
        color: #333;
        text-decoration: none;
      }
      a:hover {
        color: #000;
      }
    </style>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
      (async () => {
        try {
          const res = await fetch('https://api.github.com/repos/teloro/marshall-spirits-tests/contents?ref=gh-pages', {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json',
              'X-GitHub-Api-Version': '2022-11-28',
            },
          });
          if (!res.ok) {
            throw new Error(`Response status: ${res.status}`);
          }
          const json = await res.json();
          let html = '<ul>';
          
          for (let item of json) {
            if (item.type === 'dir' && (/^\d{8}_\d+Z$/).test(item.name)) {
              html += `<li><a href="${item.path}">${ormatTimestamp(item.name)}</a></li>`;
            }
          }
  
          html += '</ul>';
          document.getElementById('reports-list').innerHTML = html;

        } catch (e) {
          console.error(e.message);
        }
      })()
    });

    function formatTimestamp(timestamp) {
      const [datePart, timePart] = timestamp.split('_');
      const year = datePart.slice(0, 4);
      const month = datePart.slice(4, 6);
      const day = datePart.slice(6, 8);
      const hours = timePart.slice(0, 2);
      const minutes = timePart.slice(2, 4);
      const seconds = timePart.slice(4, 6);

      const date = new Date(Date.UTC(year, month - 1, day, hours, minutes, seconds));
      return date.toLocaleString('en-US', { timeZone: 'UTC', dateStyle: 'medium', timeStyle: 'long' });
    }
    </script>
  </head>
  <body>
    <h1>E2E Test Reports</h1>
    <div id="reports-list">
      <p class="loading">Loading...</p>
    </div>
  <body>
</html>
